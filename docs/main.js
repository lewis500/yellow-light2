(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(14),l=a(268),o=a(272),i=a(4),s=a(266),m=a(13),u=a(267),d=a(54);var h,f,x,p={width:3,height:1.2},y=8,E=95,v=75,g=3.4,b=18,O=21,w=3.5,j=.6,k=.75,S=a(30),A=a(271),T=a(12),C=a.n(T),N={},L=Object(A.a)({road:{fill:i.a.grey[200],stroke:"none"},svg:{display:"inline-block",margin:"30px 0","& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}},text:{textAlign:"center",fontSize:"12px",fontFamily:"Puritan, sans-serif"},car:{fill:i.a.lightBlue[500]},xssd:{stroke:i.a.green.A400,strokeWidth:"2px"}}),R=87.5,W=Object(S.a)().range([0,700]).domain([v,v-E]),P={green:i.a.green[400],red:i.a.red.A200,yellow:i.a.yellow[700]},_=W(0),M=_-W(y),z=_-W(p.width),Y=_-W(p.height),B=M/2,D=Object(r.createElement)("g",{},Object(r.createElement)("rect",{height:M,width:700,x:0,y:R-B,stroke:"none",fill:i.a.grey[200]}),Object(r.createElement)("rect",{height:175,width:M,x:_,y:0,stroke:"none",fill:i.a.grey[200]})),F=function(e){var t=e.x,a=e.y,n=e.violation;return Object(r.createElement)("rect",{width:z,height:Y,fill:n?i.a.red.A400:i.a.lightBlue.A400,y:R+a-4,x:t-z})},X=function(e){var t=e.color;return Object(r.createElement)("line",{x1:_,x2:_,y1:R-B,y2:R+B,strokeWidth:6,stroke:t})},I=(h=Object(r.createElement)("line",{x1:0,x2:0,y1:0,y2:B-10,stroke:i.a.grey[500],strokeWidth:"2px"}),f=Object(r.createElement)("line",{x1:0,x2:0,y1:B+11,y2:M,stroke:i.a.grey[500],strokeWidth:"2px"}),x=n.a.createElement("foreignObject",{width:"30",height:"30",y:B-11,x:"-7"},n.a.createElement(C.a,{math:"x_0"})),function(e){var t=e.x;return n.a.createElement("g",{transform:"translate(".concat(t,",").concat(R-B,")")},h,f,x)}),H=function(){var e=n.a.createElement("foreignObject",{width:"40",height:"50",x:"-8",y:"2"},n.a.createElement(C.a,null,"x_{\\text{ssd}} "));return function(t){var a=t.x,c=t.classes;return n.a.createElement("g",{transform:"translate(".concat(a,",").concat(R+B+3,")")},a>45&&n.a.createElement("foreignObject",{width:"40",height:"45",x:-a/2-20,y:6},n.a.createElement("div",{className:c.text},"CAN STOP")),n.a.createElement("foreignObject",{width:"40",height:"45",x:(_-a)/2-20,y:6},n.a.createElement("div",{className:c.text},"CAN'T STOP")),e,Object(r.createElement)("line",{markerStart:"url(#arrow)",stroke:i.a.blue[400],strokeWidth:2,x2:-a,x1:0}),Object(r.createElement)("line",{markerStart:"url(#arrow3)",markerEnd:"url(#arrow3)",stroke:i.a.grey[400],strokeWidth:2,strokeDasharray:"2 2",x2:_-a,x1:0}))}}(),G=function(){var e=n.a.createElement("foreignObject",{width:"30",height:"30",x:"-8",y:"-30"},n.a.createElement(C.a,null,"x_{\\text{cl}} "));return function(t){var a=t.x,c=t.classes;return n.a.createElement("g",{transform:"translate(".concat(a,",").concat(R-B-3,")")},e,n.a.createElement("foreignObject",{width:"45",height:"45",x:_/2-a/2-20,y:-35},n.a.createElement("div",{className:c.text},"CAN CLEAR")),n.a.createElement("foreignObject",{width:"45",height:"45",x:-a/2-20,y:-35},n.a.createElement("div",{className:c.text},"CAN'T CLEAR")),Object(r.createElement)("line",{markerEnd:"url(#arrow2)",markerStart:"url(#arrow2)",stroke:i.a.deepOrange.A400,strokeWidth:2,x2:0,x1:_-a}),Object(r.createElement)("line",{markerEnd:"url(#arrow3)",stroke:i.a.grey[400],strokeWidth:2,strokeDasharray:"2,2",x2:0,x1:-a}))}}(),J=function(e){var t=e.mover,a=e.stopper,r=e.x0,c=e.lightColor,l=e.xssd,o=e.xcl,s=L(N);return n.a.createElement("svg",{width:700,height:175,className:s.svg},n.a.createElement("defs",null,n.a.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"8",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",fill:i.a.blue[400]},n.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})),n.a.createElement("marker",{id:"arrow2",viewBox:"0 0 15 15",refY:"5",refX:"8",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",fill:i.a.deepOrange.A400},n.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})),n.a.createElement("marker",{id:"arrow3",viewBox:"0 0 15 15",refY:"5",refX:"8",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",fill:i.a.grey[400]},n.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"}))),n.a.createElement("g",null,D,n.a.createElement(I,{x:W(r),classes:s}),n.a.createElement(H,{x:W(l),classes:s}),n.a.createElement(G,{x:W(o),classes:s}),n.a.createElement(X,{color:P[c],classes:s}),n.a.createElement(F,{x:W(t.x),y:-15,violation:t.x<-1&&r>o}),n.a.createElement(F,{x:W(a.x),y:15,violation:a.x<-1})))},K=a(2),V=a(38),U=a(25);function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){Q(e,t,a[t])})}return e}function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Z={play:!1,v0:b,x0:.75*v,stopper:{x:v,v:b},mover:{x:v,v:b},time:0,useState:2,yellow:2.5},$=function(e,t,a,r){var n=e.x,c=e.v,l=t.payload,o=l.xssd,i=l.dt;return n<Math.min(o,r)-a*k?{v:Math.max(c-g*i,0),x:Math.min(n-c*i+.5*g*i*i,n)}:{v:c,x:n-c*i}},ee=function(e,t){switch(t.type){case"TICK":var a=t.payload.dt,r=e.mover,n=e.stopper,c=e.v0,l=e.x0;return q({},e,{time:e.time+a,mover:{v:r.v,x:r.x-r.v*a},stopper:$(n,t,c,l)});case"SET_X0":return q({},e,{x0:t.payload});case"SET_PLAY":return q({},e,{play:t.payload});case"SET_YELLOW":return q({},e,{yellow:t.payload});case"SET_V0":return q({},e,{v0:t.payload});case"RESTART":return q({},e,{mover:{v:e.v0,x:v},time:0,stopper:{v:e.v0,x:v}});case"DRAG":return q({},e,{v0:t.payload.v0,x0:t.payload.x0});case"RESET":return q({},e,{play:!1,time:0,mover:{v:e.v0,x:v},stopper:{v:e.v0,x:v}});default:return e}},te=n.a.createContext({state:Z,dispatch:null}),ae=Object(U.a)(function(e){return e*k+e*e/2/g}),re=Object(U.a)(function(e,t){return-p.width+e*t}),ne=a(53),ce=(a(69),10),le=40,oe=40,ie=10,se=Object(A.a)({svg:{width:400+oe+ie,height:800/3+ce+le,"& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}},math:{fontSize:"12px"},dot:{stroke:"white",strokeWidth:3,fill:i.a.pink[500],cursor:"pointer"},xssd:{fill:"none",strokeWidth:2,stroke:i.a.blue.A400},xcl:{fill:"none",strokeWidth:2,stroke:i.a.deepOrange.A400},hidden:{fill:"white",opacity:0}}),me=Object(S.a)().domain([0,v]).range([800/3,0]),ue=Object(S.a)().domain([0,O]).range([0,400]),de=Object(V.b)(me),he=Object(V.a)(ue),fe=Object(U.a)(function(e,t){return"translate(".concat(e,",").concat(t,")")}),xe=Array.apply(null,{length:50}).map(function(e,t){return t}),pe="M"+xe.map(function(e){return[ue(e),me(k*e+e*e/2/g)]}).join("L"),ye=Object(U.a)(function(e){return"M"+xe.map(function(t){return[ue(t),me(-p.width+t*e)]}).join("L")}),Ee=function(){var e=se({}),t=Object(r.useRef)(),a=Object(r.useRef)(),c=(Object(r.useRef)(),Object(r.useRef)()),l=Object(r.useContext)(te),o=l.state,i=l.dispatch,s=o.v0,m=o.x0,u=Object(r.useRef)(i);return Object(r.useLayoutEffect)(function(){Object(K.d)(t.current).call(de),Object(K.d)(a.current).call(he);var e=Object(ne.a)().on("drag",function(){u.current({type:"DRAG",payload:{x0:me.invert(K.b.y),v0:ue.invert(K.b.x)}})});Object(K.d)(c.current).call(e)},[]),n.a.createElement("svg",{className:e.svg},n.a.createElement("g",{transform:fe(oe,ce)},n.a.createElement("mask",{id:"myMask"},n.a.createElement("rect",{width:400,height:800/3,fill:"white"})),n.a.createElement("rect",{className:e.hidden,width:400,height:800/3}),n.a.createElement("g",{ref:t}),n.a.createElement("g",{ref:a,transform:fe(0,800/3)}),n.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(10,",",0,")")},n.a.createElement("span",{className:e.math},n.a.createElement(C.a,{math:"x \\; \\text{(m)}"}))),n.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(355,",").concat(800/3-20,")")},n.a.createElement("span",{className:e.math},n.a.createElement(C.a,{math:"v \\; \\text{(m/s)}"}))),n.a.createElement("path",{d:pe,className:e.xssd,mask:"url(#myMask)"}),n.a.createElement("path",{d:ye(o.yellow),className:e.xcl,mask:"url(#myMask)"}),n.a.createElement("circle",{ref:c,className:e.dot,r:"6",transform:"translate(".concat(ue(s),",").concat(me(m),")")})))};function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ge,be,Oe,we,je=Object(A.a)({"@global":{body:{margin:"0 !important",padding:"0 !important",fontFamily:" 'Puritan', sans-serif"}},main:{maxWidth:"900px",color:i.a.grey[800],margin:"0 auto",boxSizing:"border-box",display:"flex",flexDirection:"column"},red:{fill:i.a.red.A400},paper:{maxWidth:"500px",margin:"auto",display:"flex",padding:"24px 36px",flexDirection:"column"},button:{alignSelf:"center"},visContainer:{margin:"0 auto"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),ke=(ge=Object(m.a)(function(e){return{root:{color:e.palette.primary.main,marginBottom:"15px"}}})(o.a),be=n.a.createElement(s.a,{variant:"body1"},n.a.createElement(C.a,{math:"x_0"})," (position when light turns green → yellow)"),Oe=n.a.createElement(s.a,{variant:"body1"},n.a.createElement(C.a,{math:"v_0"})," (speed when light changes green → yellow)"),we=n.a.createElement(s.a,{variant:"body1"},n.a.createElement(C.a,{math:"t_y"})," (yellow light duration)"),function(){var e=Object(r.useContext)(te),t=e.state,a=e.dispatch,c=t.x0,l=t.v0,o=t.yellow;return n.a.createElement(n.a.Fragment,null,be,n.a.createElement(ge,{onChange:function(e,t){return a({type:"SET_X0",payload:t})},value:c,step:.02,min:0,max:v}),Oe,n.a.createElement(ge,{onChange:function(e,t){return a({type:"SET_V0",payload:t})},value:l,step:.1,min:0,max:O}),we,n.a.createElement(ge,{onChange:function(e,t){return a({type:"SET_YELLOW",payload:t})},value:o,step:.1,min:0,max:w}))}),Se={},Ae=function(){var e=Object(r.useContext)(te),t=e.state,a=e.dispatch,c=t.x0,o=t.v0,i=t.stopper,s=t.mover,m=t.time,h=t.play,f=t.yellow,x=je(Se),p=ae(o),y=re(o,f);return function(e,t){var a=Object(r.useRef)(0);a.current=e,Object(r.useLayoutEffect)(function(){if(t){var e=0,r=Object(d.a)(function(t){var r=(t-e)/1e3;e=t,a.current&&a.current(r)});return function(){return r.stop()}}},[t])}(function(e){e/=j,s.x>v-E||i.v>0?a({type:"TICK",payload:{dt:e,xssd:p}}):setTimeout(function(){a({type:"RESTART"})},0)},h),n.a.createElement("div",{className:x.main},n.a.createElement("div",{className:x.visContainer},J({mover:s,stopper:i,xcl:y,x0:c,lightColor:m<(v-c)/o?"green":m-(v-c)/o<f?"yellow":"red",xssd:p})),n.a.createElement(u.a,{className:x.paper,elevation:2},n.a.createElement(ke,null),n.a.createElement(l.a,{className:x.button,variant:"contained",color:"secondary",onClick:function(){return a({type:"SET_PLAY",payload:!h})}},h?"PAUSE":"PLAY"),n.a.createElement(l.a,{className:x.button,style:{marginTop:"10px"},variant:"contained",color:"secondary",onClick:function(){a({type:"RESET"})}},"Reset")),n.a.createElement("div",{style:{margin:"0 auto"}},n.a.createElement(Ee,null)))},Te=a(270),Ce=a(52),Ne=a(50),Le=a.n(Ne),Re=a(51),We=a.n(Re),Pe=document.getElementById("root");if(!Pe)throw Error("no root container");var _e=Object(Ce.a)({palette:{primary:{main:Le.a[500]},secondary:{main:We.a[500]}}});Object(c.render)(n.a.createElement(Te.a,{theme:_e},n.a.createElement(function(){var e=ve(Object(r.useReducer)(ee,Z),2),t=e[0],a=e[1];return n.a.createElement(te.Provider,{value:{state:t,dispatch:a}},n.a.createElement(Ae,null))},null)),Pe)}},[[145,1,2]]]);